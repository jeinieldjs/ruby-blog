<% flash.each do |key, value| %>
  <p class="<%= key %>"><%= value %></p>
<% end %>

<%= render @post %>

<div class="post-actions">
  <%= link_to "Edit this post", edit_post_path(@post) %> |
  <%= link_to "Back to posts", posts_path %>

  <%= button_to "Destroy this post", @post, method: :delete %>
</div>

<div class="comment-form">
    <%= form_with(model: [ @post, @comment ], local: true) do |form| %>
    <% if @comment.errors.any? %>
      <div style="color: red">
        <h2><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being saved:</h2>
        <ul>
          <% @comment.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form.text_area :body, placeholder: 'Your comment here' %>
    <%= form.submit 'Add Comment' %>
  <% end %>
</div>

<div class="comments-section">
  <h2>Comments:</h2>
  <% @comments.each do |comment| %>
    <div class="comment">
      <h4 class="comment-user" style="text-decoration: underline;">Anonymous:</h4>
      <p class="comment-body"><%= comment.body %></p>
      
      <%= link_to "Edit", edit_post_comment_path(@post, comment) %> |
      <%= button_to "Delete", post_comment_path(@post, comment), method: :delete, data: { confirm: 'Are you sure?' } %>
    </div>
  <% end %>
</div>